{"ast":null,"code":"import auth0 from \"../../../lib/auth0\";\nimport { firebase } from \"../../../lib\";\nconst firebaseDB = firebase.database();\nexport default (async (req, res) => {\n  try {\n    const {\n      name,\n      questions\n    } = req.body; // //Add auth0\n    // const session = await auth0.getSession(req);\n    // if (!session || !session.user) {\n    //   res.writeHead(302, {\n    //     Location: '/api/login'\n    //   });\n    //   res.end();\n    //   return;\n    // }\n    // const { user } = session\n    // const { name: username } = user\n    //const username = \"sharicazap@gmail.com\";\n    //Agrego document en la collection de historias (usando firebase con async/await)\n\n    const responseKey = await firebaseDB.ref('questions').push({\n      //username,\n      name,\n      historia,\n      questions\n    }).getKey(); //Devuelvo el usuario recien creado\n\n    res.status(200).json({\n      \"status\": \"added\",\n      \"id\": responseKey,\n      historia,\n      name,\n      questions\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(error.status || 500).json({\n      code: error.code,\n      error: error.message\n    });\n  }\n});","map":{"version":3,"sources":["C:/Users/Usuario/Documents/GitHub/next-meditus/next-meditus/pages/api/questions/add.js"],"names":["auth0","firebase","firebaseDB","database","req","res","name","questions","body","responseKey","ref","push","historia","getKey","status","json","error","console","code","message"],"mappings":"AAAA,OAAOA,KAAP;AACA,SAASC,QAAT;AACA,MAAMC,UAAU,GAAGD,QAAQ,CAACE,QAAT,EAAnB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACJ,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAsBH,GAAG,CAACI,IAAhC,CADI,CAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;;AACA,UAAMC,WAAW,GAAG,MAAMP,UAAU,CAACQ,GAAX,CAAe,WAAf,EAA4BC,IAA5B,CAAiC;AACzD;AACEL,MAAAA,IAFuD;AAGvDM,MAAAA,QAHuD;AAIvDL,MAAAA;AAJuD,KAAjC,EAKvBM,MALuB,EAA1B,CAnBI,CA0BJ;;AACAR,IAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAE,gBAAU,OAAZ;AAAqB,YAAMN,WAA3B;AAAwCG,MAAAA,QAAxC;AAAkDN,MAAAA,IAAlD;AAAwDC,MAAAA;AAAxD,KAArB;AAEC,GA7BD,CA6BE,OAAOS,KAAP,EAAc;AAChBC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAX,IAAAA,GAAG,CAACS,MAAJ,CAAWE,KAAK,CAACF,MAAN,IAAgB,GAA3B,EAAgCC,IAAhC,CAAqC;AACrCG,MAAAA,IAAI,EAAEF,KAAK,CAACE,IADyB;AAEjCF,MAAAA,KAAK,EAAEA,KAAK,CAACG;AAFoB,KAArC;AAIC;AACJ,CArCD","sourcesContent":["import auth0 from '../../../lib/auth0';\nimport { firebase } from '../../../lib';\nconst firebaseDB = firebase.database();\n\nexport default async (req, res) => {\n    try {\n    const { name, questions } = req.body;\n\n    // //Add auth0\n    // const session = await auth0.getSession(req);\n    // if (!session || !session.user) {\n    //   res.writeHead(302, {\n    //     Location: '/api/login'\n    //   });\n    //   res.end();\n    //   return;\n    // }\n\n    // const { user } = session\n    // const { name: username } = user\n\n    //const username = \"sharicazap@gmail.com\";\n\n    //Agrego document en la collection de historias (usando firebase con async/await)\n    const responseKey = await firebaseDB.ref('questions').push({\n      //username,\n        name,\n        historia,\n        questions,\n    }).getKey()\n\n    //Devuelvo el usuario recien creado\n    res.status(200).json({ \"status\": \"added\", \"id\": responseKey, historia, name, questions });\n\n    } catch (error) {\n    console.error(error);\n    res.status(error.status || 500).json({\n    code: error.code,\n        error: error.message\n    });\n    }\n};"]},"metadata":{},"sourceType":"module"}